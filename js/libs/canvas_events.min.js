/*************************************************************
 * This script is developed by Arturs Sosins aka ar2rsawseen, http://webcodingeasy.com
 * Feel free to distribute and modify code, but keep reference to its creator
 *
 * Canvas Events class extends canvas object to help to attach mouse events 
 * to different shapes with minimal javascript code modifications.
 * Canvas context methods that perform actual drawing like
 * stroke, fill, strokeRect, fillRect, drawImage
 * return a shape object to which you can attach events
 *
 * For more information, examples and online documentation visit: 
 * http://webcodingeasy.com/JS-classes/Emulate-events-on-canvas-objects
**************************************************************/
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('6 2k=W(E){6 F=7;7.16=(1t E=="2s")?1w.2o(E):E;6 G=7.16.2w("2d");6 H;6 I=0;6 J=0;6 K=11 14();K.1b=1;K.1f=0;K.1g=0;K.1e=1;K.1k=0;K.1l=0;6 L=[];6 M=[];6 N=0;7.1W=W(){U(F.16,"1I",W(e){e=T(e);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1I&&o.1p(e.1v,e.1B)){6 a=R(o);o.1I.1r(H,e,o.1h);S(a)}}});U(F.16,"1G",W(e){e=T(e);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1G&&o.1p(e.1v,e.1B)){6 a=R(o);o.1G.1r(H,e,o.1h);S(a)}}});U(F.16,"1K",W(e){e=T(e);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1K&&o.1p(e.1v,e.1B)){6 a=R(o);o.1K.1r(H,e,o.1h);S(a)}}});U(F.16,"1N",W(e){e=T(e);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1N&&o.1p(e.1v,e.1B)){6 a=R(o);o.1N.1r(H,e,o.1h);S(a)}}});6 b=W(e){e=T(e);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1p(e.1v,e.1B)){Y(o.1M){6 a=R(o);o.1M.1r(H,e,o.1h);S(a)}Y(o.1O){6 a=R(o);o.1O.1r(H,e,o.1h);S(a)}o.1y=1q}1m Y(o.1y){o.1y=1n;Y(o.1D){6 a=R(o);o.1D.1r(H,e,o.1h);S(a)}}}};U(F.16,"1M",W(){U(F.16,"1O",b)});U(F.16,"1D",W(e){e=T(e);V(F.16,"1O",b);6 l=L.12;13(6 i=0;i<l;i++){6 o=L[i];Y(o.1y){o.1y=1n;Y(o.1D){6 a=R(o);o.1D.1r(H,e,o.1h);S(a)}}}});6 c=W(a){O.2m[a]=W(){G[a].18(G,X)}};13(6 i 21 G){Y(!O[i]&&G[i].18){c(i)}1m Y(!O[i]){O[i]=G[i]}}H=11 O();1d H};6 O=W(){6 c=7;7.2u=W(x,y,a,b){7.1A();7.1C(x,y);7.15(x+a,y);7.15(x+a,y+b);7.15(x,y+b);7.15(x,y);1d 7.1P()};7.2q=W(x,y,a,b){7.1A();7.1C(x,y);7.15(x+a,y);7.15(x+a,y+b);7.15(x,y+b);7.15(x,y);1d 7.1Q()};7.1Z=W(a,x,y,b,d){Q(c,G);6 e=11 14();Q(c,e);G.1Z.18(G,X);6 f=[];f[0]=X[0];f[1]=X[1];f[2]=X[2];f[3]=(X[3])?X[3]:X[0].2l;f[4]=(X[4])?X[4]:X[0].2z;6 o=11 P("1X",f,K,e);1d o};7.2x=W(x,y){7.1E(1,0,0,1,x,y)};7.2B=W(x,y){7.1E(x,0,0,y,0,0)};7.2t=W(a){7.1E(8.1u(a),8.1z(a),-8.1z(a),8.1u(a),0,0)};7.1E=W(){6 m=11 14();m.1b=X[0]*K.1b+X[2]*K.1f;m.1f=X[1]*K.1b+X[3]*K.1f;m.1g=X[0]*K.1g+X[2]*K.1e;m.1e=X[1]*K.1g+X[3]*K.1e;m.1k=K.1k+X[4];m.1l=K.1l+X[5];K=m;G.1E.18(G,X)};7.1L=W(){6 m=11 14();m.1b=X[0];m.1f=X[1];m.1g=X[2];m.1e=X[3];m.1k=X[4];m.1l=X[5];K=m;G.1L.18(G,X)};7.1A=W(){N=M.12;6 a=[];M.1c(a);G.1A.18(G,X)};7.15=W(){6 o=11 14();o.9=X;o.1s="15";M[N].1c(o);G.15.18(G,X)};7.1C=W(){6 o=11 14();o.9=X;o.1s="1C";6 l=M[N].12;l=(l>0)?l-1:0;M[N][l]=o;G.1C.18(G,X)};7.1J=W(){6 o=11 14();o.9=X;o.1s="1J";M[N].1c(o);G.1J.18(G,X)};7.1Q=W(){Q(c,G);6 a=11 14();Q(c,a);6 o=11 P("1j",M[N],K,a);G.1Q.18(G,X);1d o};7.1P=W(){Q(c,G);6 a=11 14();Q(c,a);6 o=11 P("1j",M[N],K,a);G.1P.18(G,X);1d o};7.20=W(){Q(c,G);G.20.18(G,X)};7.27=W(){G.27.18(G,X);Q(G,c)};7.2p=W(a,b,c){b=(1t b!="1R")?24(b):0;c=(1t c!="1R")?24(c):0;Y(b!=0||c!=0){6 o;6 l=L.12;13(6 i=0;i<l;i++){Y(L[i].1h=a){o=L[i];1F}}6 l=o.1j.12;13(6 i=0;i<l;i++){6 d=o.1j[i];6 e=d.12;13(6 j=0;j<e;j++){d[j].x+=b;d[j].y+=c}}6 l=o.1x.12;13(6 i=0;i<l;i++){6 d=o.1x[i];d.17+=b;d.1a+=c}}Y(a[0].9){6 l=a.12;G.1A();13(6 i=0;i<l;i++){a[i].9[0]+=b;a[i].9[1]+=c;G[a[i].1s].18(G,a[i].9)}}1m{7.1A();7.1C(a[1]+b,a[2]+c);7.15((a[1]+a[3])+b,a[2]+c);7.15((a[1]+a[3])+b,(a[2]+a[4])+c);7.15(a[1]+b,(a[2]+a[4])+c);7.15(a[1]+b,a[2]+c)}}};6 P=W(t,u,v,w){7.1p=1o;7.29=w;7.1h=[];7.1h=u;7.1j=[];7.1x=[];6 z=1n;7.Z=v;Y(t=="1j"&&u&&7.Z){6 A=[];6 l=u.12;13(6 i=0;i<l;i++){6 o=11 14();Y(u[i].1s=="1J"){6 x=u[i].9[0];6 y=u[i].9[1];o.17=x*7.Z.1b+y*7.Z.1g+7.Z.1k;o.1a=x*7.Z.1f+y*7.Z.1e+7.Z.1l;o.r=u[i].9[2];o.1Y=u[i].9[5];Y(o.1Y){o.19=(u[i].9[3]+2*8.10)%(2*8.10);o.1i=(u[i].9[4]+2*8.10)%(2*8.10)}1m{o.1i=(u[i].9[3]+2*8.10)%(2*8.10);o.19=(u[i].9[4]+2*8.10)%(2*8.10)}o.19=(o.19<o.1i)?o.19+8.10*2:o.19;7.1x.1c(o)}1m{o.1s=u[i].1s;o.9=[];6 x=u[i].9[0];6 y=u[i].9[1];o.9[0]=x*7.Z.1b+y*7.Z.1g+7.Z.1k;o.9[1]=x*7.Z.1f+y*7.Z.1e+7.Z.1l;A.1c(o)}}6 l=A.12;13(6 i=0;i<l;){6 B=8.1V(A[i].9[1]-A[(i+1)%l].9[1],A[i].9[0]-A[(i+1)%l].9[0]);6 C=8.1V(A[(i+2)%l].9[1]-A[(i+1)%l].9[1],A[(i+2)%l].9[0]-A[(i+1)%l].9[0]);Y((B*C<0)&&(8.1H(B)!=8.10&&8.1H(C)!=8.10)){6 D=[];6 o=11 14();o.x=A[(i+l-1)%l].9[0];o.y=A[(i+l-1)%l].9[1];D.1c(o);6 o=11 14();o.x=A[i].9[0];o.y=A[i].9[1];D.1c(o);6 o=11 14();o.x=A[(i+l+1)%l].9[0];o.y=A[(i+l+1)%l].9[1];D.1c(o);7.1j.1c(D);A.23(i,1);l--;i=i%l;Y((A[i].9[0]-A[(i+l-1)%l].9[0])/(A[(i+l+1)%l].9[0]-A[(i+l-1)%l].9[0])==(A[i].9[1]-A[(i+l-1)%l].9[1])/(A[(i+l+1)%l].9[1]-A[(i+l-1)%l].9[1])){A.23(i,1);l--;i--}i=(i+l-1)%l}1m{i++}}6 l=A.12;Y(l>0){6 D=[];13(6 i=0;i<l;i++){6 o=11 14();o.x=A[i].9[0];o.y=A[i].9[1];D.1c(o)}7.1j.1c(D)}}7.1y=1n;2n(t){26"1X":7.1p=W(x,y){6 a=8.2a((((x-7.Z.1k)*7.Z.1e)-((y-7.Z.1l)*7.Z.1g))/((7.Z.1e*7.Z.1b)-(7.Z.1f*7.Z.1g)));6 b=8.2a(((y-7.Z.1l)*7.Z.1b-(x-7.Z.1k)*7.Z.1f)/(7.Z.1e*7.Z.1b-7.Z.1f*7.Z.1g));1d(u[1]<a&&u[1]+u[3]>a&&u[2]<b&&u[2]+u[4]>b)?1q:1n};1F;26"1j":7.1p=W(x,y){6 g=W(a,b,c,d,e,f){1d((b-d)*(e-c)-(a-c)*(f-d))};6 h=1n;6 l=7.1j.12;13(6 i=0;i<l;i++){6 k=7.1j[i];6 m=k.12;13(6 j=1;j<m;j++){Y(((g(x,y,k[0].x,k[0].y,k[j].x,k[j].y)*g(x,y,k[j].x,k[j].y,k[(j+1)%m].x,k[(j+1)%m].y))>0)&&((g(x,y,k[j].x,k[j].y,k[(j+1)%m].x,k[(j+1)%m].y)*g(x,y,k[(j+1)%m].x,k[(j+1)%m].y,k[0].x,k[0].y))>0)){h=1q;1F}}Y(h){1F}}Y(!h){6 l=7.1x.12;13(6 i=0;i<l;i++){6 k=7.1x[i];6 n=(8.1V(y-k.1a,x-k.17)+2*8.10)%(2*8.10);6 o=1n;Y(8.1T(x-k.17,2)+8.1T(y-k.1a,2)<=8.1T(k.r,2)){o=1q}Y(8.1H(k.1i-k.19)>8.10){6 p=k.17+k.r*8.1u(k.1i);6 q=k.1a+k.r*8.1z(k.1i);6 r=k.17+k.r*8.1u(k.19%(2*8.10));6 s=k.1a+k.r*8.1z(k.19%(2*8.10));Y((g(x,y,p,q,r,s)*g(x,y,r,s,k.17,k.1a)>0&&g(x,y,r,s,k.17,k.1a)*g(x,y,k.17,k.1a,p,q)>0)){h=1q}}Y(o&&((n>=k.1i&&n<=k.19)||(n+(8.10*2)>=k.1i&&n+(8.10*2)<=k.19))){Y(8.1H(k.1i-k.19)<8.10){6 p=k.17+k.r*8.1u(k.1i);6 q=k.1a+k.r*8.1z(k.1i);6 r=k.17+k.r*8.1u(k.19%(2*8.10));6 s=k.1a+k.r*8.1z(k.19%(2*8.10));Y(!(g(x,y,p,q,r,s)*g(x,y,r,s,k.17,k.1a)>0&&g(x,y,r,s,k.17,k.1a)*g(x,y,k.17,k.1a,p,q)>0)){h=1q}}1m{h=1q}}}}1d h};1F}7.2r=W(a,b){Y(!z){z=1q;L.1c(7)}7[a]=b};7.1K=1o;7.1M=1o;7.1D=1o;7.1G=1o;7.1I=1o;7.1N=1o;7.2C=1o};6 Q=W(a,b){13(6 i 21 a){Y(1t a[i]!="W"){b[i]=a[i]}}};6 R=W(o){G.1L(o.Z.1b,o.Z.1f,o.Z.1g,o.Z.1e,o.Z.1k,o.Z.1l);6 a=11 14();Q(H,a);Q(o.29,H);1d a};6 S=W(a){Q(a,H);G.1L(K.1b,K.1f,K.1g,K.1e,K.1k,K.1l)};6 T=W(e){Y(1t e.1S==\'1R\'&&1t e.22==\'2y\'&&1w.1U){e.28=e.22+1w.2c.2f+1w.1U.2f;e.1S=e.2v+1w.2c.25+1w.1U.25};Y(F.16.2e){I=F.16.2h;J=F.16.2j;6 a=F.16;2A(a=a.2e){I+=a.2h;J+=a.2j}};e.1v=e.28-I;e.1B=e.1S-J;1d e};6 U=W(a,b,c){Y(a.2b)a.2b(b,c,1n);1m a.2E(\'2g\'+b,c)};6 V=W(a,b,c){Y(a.2i)a.2i(b,c,1n);1m a.2D(\'2g\'+b,c)};1d 7.1W()}',62,165,'||||||var|this|Math|data|||||||||||||||||||||||||||||||||||||||||||||||||function|arguments|if|trans|PI|new|length|for|Object|lineTo|elem|cx|apply|ea|cy|m11|push|return|m22|m12|m21|args|sa|path|dx|dy|else|false|null|in_range|true|call|type|typeof|cos|elemX|document|arcs|hover|sin|beginPath|elemY|moveTo|mouseout|transform|break|mouseup|abs|mousedown|arc|click|setTransform|mouseover|dblclick|mousemove|fill|stroke|undefined|pageY|pow|documentElement|atan2|construct|img|cw|drawImage|save|in|clientX|splice|parseInt|scrollTop|case|restore|pageX|state|round|addEventListener|body||offsetParent|scrollLeft|on|offsetLeft|removeEventListener|offsetTop|canvas_events|width|prototype|switch|getElementById|recreate|strokeRect|addEvent|string|rotate|fillRect|clientY|getContext|translate|number|height|while|scale|mouemove|detachEvent|attachEvent'.split('|'),0,{}))
